<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grazi & Felipe ðŸŽ‰</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500&family=Quicksand&display=swap">

  <link rel="stylesheet" href="./css/style.css">

  <script src="./env.js"></script>
  <script type="module" src="./seu-script.js"></script>

</head>
<body>
  <div class="hero">
    <h1 class="fs-1">Grazi & Felipe ðŸ’–</h1>
    <p class="fs-4">Nascidos no mesmo dia. Apaixonados todo dia.</p>
  </div>

  <div id="carouselExampleIndicators" class="carousel slide carousel-fade container my-5" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="5" aria-label="Slide 6"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="6" aria-label="Slide 7"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="7" aria-label="Slide 8"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="8" aria-label="Slide 9"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="9" aria-label="Slide 10"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="10" aria-label="Slide 11"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="11" aria-label="Slide 12"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="12" aria-label="Slide 13"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="13" aria-label="Slide 14"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="14" aria-label="Slide 15"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="15" aria-label="Slide 16"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="16" aria-label="Slide 17"></button>
    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="17" aria-label="Slide 18"></button>
  </div>
  <div class="carousel-inner">

      <!-- Imagens do carrossel -->
        <div class="carousel-item active">
            <img src="./imagens/1.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/2.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/3.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/4.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/5.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/6.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/7.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/8.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/9.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/10.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/11.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/12.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/13.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/14.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/15.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/16.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/17.jpeg" class="d-block w-100 rounded shadow">
        </div>
        <div class="carousel-item">
            <img src="./imagens/18.jpeg" class="d-block w-100 rounded shadow">
        </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">PrÃ³xima</span>
    </button>

  </div>

  <section class="timeline container">
    <h2 class="text-center">RecordaÃ§Ãµes Especiais ðŸ’«</h2>
    <div class="timeline-event">
      <h5>__/__/__ - Primeira vez que se viram</h5>
      <p></p>
    </div>
    <div class="timeline-event">
      <h5>__/__/__ - </h5>
      <p></p>
    </div>
    <div class="timeline-event">
      <h5>__/__/__ - Pedido de namoro</h5>
      <p></p>
    </div>
    <div class="timeline-event">
      <h5>__/__/__ - Viagem juntos</h5>
      <p></p>
    </div>
  </section>

  <div class="recados">
    <h2 class="text-center">Um recadinho ðŸ’Œ</h2>
    <section class="my-5 text-center">
        <div class="flip-card mt-4">
        <div class="flip-card-inner">
            <div class="flip-card-front">
            <p>Para Grazi, do Felipe...</p>
            <p>Clique para ler ðŸ’•</p>
            </div>
            <div class="flip-card-back">
            <p>Te amo, minha pequena</p>
            </div>
        </div>
        </div>

        <div class="flip-card mt-4">
        <div class="flip-card-inner">
            <div class="flip-card-front">
            <p>Para Felipe, da Grazi...</p>
            <p>Clique para ler ðŸ’«</p>
            </div>
            <div class="flip-card-back">
            <p>Te amo meu amor</p>
            </div>
        </div>
        </div>
    </section>
  </div>
<section class="container my-5">
  <h2 class="text-center mb-5">Deixe sua mensagem para os aniversariantes ðŸŽ‰</h2>
  <form id="mensagemForm" class="mb-4">
    <input type="text" id="nome" placeholder="Seu nome" class="form-control my-2" required />
    <textarea id="mensagem" placeholder="Sua mensagem" class="form-control my-2" required></textarea>
    <button type="submit" class="btn btn-danger">Enviar</button>
  </form>

  <div id="mensagensContainer"></div>
</section>
<script type="module">
  import { 
    initializeApp 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

  import { 
    getFirestore, 
    collection, 
    addDoc, 
    onSnapshot, 
    serverTimestamp, 
    query, 
    orderBy,
    deleteDoc,
    doc
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: window._env_.VITE_FIREBASE_API_KEY,
    authDomain: window._env_.VITE_FIREBASE_AUTH_DOMAIN,
    projectId: window._env_.VITE_FIREBASE_PROJECT_ID,
    storageBucket: window._env_.VITE_FIREBASE_STORAGE_BUCKET,
    messagingSenderId: window._env_.VITE_FIREBASE_MESSAGING_SENDER_ID,
    appId: window._env_.VITE_FIREBASE_APP_ID,
    measurementId: window._env_.VITE_FIREBASE_MEASUREMENT_ID
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const form = document.getElementById("mensagemForm");
  const nomeInput = document.getElementById("nome");
  const mensagemInput = document.getElementById("mensagem");
  const mensagensDiv = document.getElementById("mensagensContainer");


  const mensagensQuery = query(collection(db, "mensagens"), orderBy("data"));

  onSnapshot(mensagensQuery, (snapshot) => {
    mensagensDiv.innerHTML = "";
    snapshot.forEach((docSnap) => {
      const { nome, mensagem } = docSnap.data();
      const el = document.createElement("div");
      el.classList.add("recado-card");
      el.innerHTML = `
        <div class="recado-nome">${nome}</div>
        <div class="recado-texto">${mensagem}</div>
        <button class="btn btn-sm btn-outline-danger btn-excluir" data-id="${docSnap.id}">Excluir</button>
      `;
      mensagensDiv.appendChild(el);
    });

    // Adiciona evento para excluir
    const botoesExcluir = document.querySelectorAll(".btn-excluir");
    botoesExcluir.forEach(btn => {
      btn.addEventListener("click", async (e) => {
        const id = e.target.getAttribute("data-id");
        if (confirm("Tem certeza que quer excluir este recado?")) {
          try {
            await deleteDoc(doc(db, "mensagens", id));
          } catch (error) {
            console.error("Erro ao excluir recado:", error);
            alert("NÃ£o foi possÃ­vel excluir o recado.");
          }
        }
      });
    });
  });

function criarCoracao() {
  const heart = document.createElement('div');
  heart.classList.add('heart');

  const larguraTela = window.innerWidth;
  const posicaoAleatoria = Math.random() * larguraTela;
  heart.style.left = `${posicaoAleatoria}px`;

  // cores rosadas que combinam com o site
  const cores = ['#f9748f', '#fd868c', '#ffe0ec', '#ffc0cb'];
  const corAleatoria = cores[Math.floor(Math.random() * cores.length)];

  // define cor no elemento e seus ::before/::after via CSS variÃ¡vel
  heart.style.setProperty('--cor-heart', corAleatoria);

  document.body.appendChild(heart);

  setTimeout(() => {
    heart.remove();
  }, 6000);
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const nome = nomeInput.value.trim();
  const mensagem = mensagemInput.value.trim();

  if (nome && mensagem) {
    try {
      await addDoc(collection(db, "mensagens"), {
        nome,
        mensagem,
        data: serverTimestamp()
      });
      form.reset();
      console.log('Criando coraÃ§Ã£o...');
      criarCoracao();
    } catch (error) {
      console.error("Erro ao enviar mensagem:", error);
      alert("Erro ao enviar mensagem. Tente novamente.");
    }
  }
});
// Inicia os coraÃ§Ãµes subindo automaticamente a cada 500ms
setInterval(criarCoracao, 500);

</script>

<!-- Container para coraÃ§Ãµes -->
<div id="hearts-container" style="position: fixed; pointer-events: none; bottom: 0; left: 50%; transform: translateX(-50%); z-index: 9999;"></div>

  <footer>
    Feito com muito carinho por Ana. Feliz aniversÃ¡rio casal!
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>